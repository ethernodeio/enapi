{
  "openrpc": "1.0.0-rc1",
  "info": {
    "version": "1.0.0-rc4",
    "title": "enAPI OpenRPC json-rpc API",
    "description": "EnAPI backend based on OpenRPC",
    "termsOfService": "https://ethernode.io/terms/",
    "contact": {
      "name": "ethernode support",
      "email": "support@ethernode.io",
      "url": "https://ethernode.io"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "servers": [
    {
      "name": "enApi http end point",
      "url": "https://localhost:8080"
    }
  ],
  "methods": [
    {
      "name": "createUser",
      "description": "Creates a new user in the system. Duplicates are not allowed, first user is admin",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/password"
        },
        {
          "$ref": "#/components/contentDescriptors/userRole"
        }
      ],
      "result": {
        "name": "createUser",
        "description": "Retures success or error object",
        "schema": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Return Success"
            },
            "message": {
              "type": "string",
              "description": "Success, returns info on new user."
            }
          }
        }
      },
      "errors": [
        {
          "code": 250,
          "data": [],
          "message": "User Exists"
        }
      ],
      "examples": [
        {
          "name": "Create User Success Example",
          "description": "example of create user",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/password"
            }
          ],
          "result": {
            "name": "success",
            "value": {
              "status": "success",
              "message": "account Created"
            }
          }
        },
        {
          "name": "Create User Error Example",
          "description": "example of create user error",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/password"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": "error message"
            }
          }
        }
      ]
    },
    {
      "name": "login",
      "description": "checks for user account and sets login variables and fetches JWT token.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/password"
        }
      ],
      "result": {
        "name": "login",
        "description": "Success, you will also receive an JWT token, that has to be send in the header with every api call afterwards ",
        "schema": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'Success'"
            },
            "message": {
              "type": "string",
              "description": "Returns: user info and auth token"
            }
          }
        }
      },
      "errors": [
        {
          "code": 260,
          "data": [],
          "message": "Auth Error"
        }
      ],
      "examples": [
        {
          "name": "login",
          "description": "example of susccefull login",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/password"
            }
          ],
          "result": {
            "name": "sucess",
            "value": {
              "result": {
                "status": "success",
                "message": "Auth Success",
                "user": [
                  {
                    "nodes": [
                      {
                        "nodeId": "8108dc96ac13e4c4c56ec6e43e2371a316176322cdfa1572276612fc577619b0",
                        "nodeName": "kotti-full",
                        "nodeNetwork": "kotti"
                      }
                    ],
                    "_id": "5c8ed3b654ab7b0efcde242f",
                    "userName": "bakon",
                    "password": "$2b$10$Gj1W.4L2M6FeClmDmbhlaeSLXtdVLk3MxmrInrDvwE83gBEt7QZMa",
                    "__v": 0
                  }
                ],
                "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX0lkIjoiNWM4ZWQzYjY1NGFiN2IwZWZjZGUyNDJmIiwiaWF0IjoxNTUzODIzMTk1fQ.7f06McVnooMk6TV-TaZwRGTFuChBcH0WJIJq5QnTGZU"
              }
            }
          }
        },
        {
          "name": "Login",
          "description": "Example of login user error",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/password"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": "error message"
            }
          }
        }
      ]
    },
    {
      "name": "getUser",
      "description": "Gets user info if passed user matches. Include JWT token as param0.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/JWTtoken"
        },
        {
          "$ref": "#/components/contentDescriptors/userName"
        }
      ],
      "result": {
        "name": "getUser",
        "description": "Returns user info and account info",
        "schema": {
          "type": "object",
          "required": [
            "response"
          ],
          "properties": {
            "status": {
              "type": "string",
              "description": "Response success"
            },
            "message": {
              "type": "string",
              "description": "returns users info and all associated params"
            }
          }
        }
      },
      "errors": [
        {
          "code": 270,
          "data": [],
          "message": "User Error"
        }
      ],
      "examples": [
        {
          "name": "getUser",
          "description": "example of susccefull user info fetch",
          "params": [
            {
              "$ref": "#/components/examples/JWTtoken"
            },
            {
              "$ref": "#/components/examples/userName"
            }
          ],
          "result": {
            "name": "success",
            "value": {
              "result": {
                "nodes": [
                  {
                    "nodeId": "2285bc02c1b2403ab12d09a24ffbf60151a916a40af574c42335c528e95294e8",
                    "nodeName": "kotti",
                    "nodeNetwork": "kotti"
                  }
                ],
                "_id": "5d26de405a9b4e10927f3527",
                "userName": "bakon3",
                "userRole": "admin",
                "__v": 0
              }
            }
          }
        },
        {
          "name": "getUser",
          "description": "Example of error",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "name": "password",
              "value": "test"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": {}
            }
          }
        }
      ]
    },
    {
      "name": "addNode",
      "description": "Spin up a docker container with node settings specified in the dashboard. Include auth token form login in header.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/JWTtoken"
        },
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "$ref": "#/components/contentDescriptors/syncType"
        },
        {
          "$ref": "#/components/contentDescriptors/rpcApi"
        },
        {
          "$ref": "#/components/contentDescriptors/wsApi"
        }
      ],
      "result": {
        "name": "addNode",
        "description": "Return node creations status",
        "schema": {
          "type": "object",
          "required": [
            "response"
          ],
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'Success'"
            },
            "message": {
              "type": "string",
              "description": "If returns node docker container info"
            }
          }
        }
      },
      "examples": [
        {
          "name": "addNode",
          "description": "example of susccefull node added",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "$ref": "#/components/examples/syncType"
            }
          ],
          "result": {
            "name": "success",
            "value": {
              "result": {
                "status": "success",
                "message": "Node Added",
                "data": {
                  "containerID": "e62282029b4490e1f2198d71a724eefb7738cf4114cb55d486384fff9464d6cf"
                }
              }
            }
          }
        },
        {
          "name": "addNode",
          "description": "Example of error",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/password"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": {}
            }
          }
        }
      ]
    },
    {
      "name": "removeNode",
      "description": "Remove the docker container that is running the selected node to remove. Include JWT token as arg 0.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/JWTtoken"
        },
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/containerId"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        }
      ],
      "result": {
        "name": "removeNode",
        "description": "Returns status of node deletion",
        "schema": {
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns Success"
            },
            "message": {
              "type": "string",
              "description": "Returns deletion info"
            }
          }
        }
      },
      "examples": [
        {
          "name": "removeNode",
          "description": "Example of node detroy success",
          "params": [
            {
              "$ref": "#/components/examples/JWTtoken"
            },
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/containerId"
            }
          ],
          "result": {
            "name": "success",
            "value": {
              "result": {
                "status": "success"
              }
            }
          }
        },
        {
          "name": "removeNode",
          "description": "Example of node destroy error",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "name": "containerId",
              "type": "string",
              "value": "e62282029b4490e1f2198d71a724eefb7738cf4114cb55d486384fff9464d6cf"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": {
                "error": "error message"
              }
            }
          }
        }
      ]
    },
    {
      "name": "getNodeContainerInfo",
      "description": "Inspect the docker container which is running the node. Include auth token form login in header.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/JWTtoken"
        },
        {
          "$ref": "#/components/contentDescriptors/containerId"
        }
      ],
      "result": {
        "name": "getNodeContainer",
        "description": "Returns infromation about the docker contianer that is running the node client",
        "schema": {
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'Success'"
            },
            "message": {
              "type": "string",
              "description": "Returns info about docker contianer node is running in."
            }
          }
        }
      },
      "examples": [
        {
          "name": "getNodeContainer",
          "description": "example of successful node info fetch",
          "params": [
            {
              "$ref": "#/components/examples/JWTtoken"
            },
            {
              "name": "containerId",
              "type": "string",
              "value": "e62282029b4490e1f2198d71a724eefb7738cf4114cb55d486384fff9464d6cf"
            }
          ],
          "result": {
            "name": "success",
            "value": {
              "result": {
                "status": "success",
                "containerID": "e62282029b4490e1f2198d71a724eefb7738cf4114cb55d486384fff9464d6cf",
                "containerCreated": "2019-03-29T03:16:10.371956508Z",
                "containerState": "running",
                "rcpPort": "33076",
                "wsPort": "33077"
              }
            }
          }
        },
        {
          "name": "getNodeContainer",
          "description": "Example of error",
          "params": [
            {
              "name": "userName",
              "value": "bakon"
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": {
                "error": "error message"
              }
            }
          }
        }
      ]
    },
    {
      "name": "sol_compile",
      "description": "Compile smart contract written in Solidity into bytecode for Ethereum based blockchain",
      "params": [
        {
          "name": "solVersion",
          "description": "Version of solidity to compile with, please make sure the Blokchain netowrk is compatible with your chosen version of Solidity.",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "solCode",
          "description": "Solidity code to be compiled into bytecode",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "sol_compile",
        "description": "Returns solidity code in bytecode, warnings and other params. Return whole code with 0 spaces and whitespace",
        "schema": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'success'"
            },
            "message": {
              "type": "string",
              "description": "Returns solidity code in bytecode, warnings and other params"
            }
          }
        }
      }
    },
    {
      "name": "web3_clientVersion",
      "description": "Returns the current client version.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "name": "web3_clientVersion_params",
          "description": "no params pass empty array []",
          "required": true,
          "schema": {
            "type": "array"
          }
        }
      ],
      "result": {
        "name": "web3_clientVersion",
        "description": "Returns the current node client version",
        "schema": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'Success'"
            },
            "message": {
              "type": "string",
              "description": "Returns the current node client version"
            }
          }
        }
      },
      "examples": [
        {
          "name": "web3_clientVersion",
          "description": "Display Client Version Success, Example of web3_clientVersion",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "name": "web3_clientVersion_params",
              "type": "array",
              "value": []
            }
          ],
          "result": {
            "name": "web3_clientVersion",
            "value": {
              "result": {
                "jsonrpc": "2.0",
                "id": 42,
                "result": "Geth/bakon-kotti-full/v1.8.23-stable-f1b192d5/linux-arm64/go1.10.4"
              }
            }
          }
        },
        {
          "name": "web3_clientVersion",
          "description": "node query error example",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "name": "params",
              "type": "array",
              "value": []
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": "error message"
            }
          }
        }
      ]
    },
    {
      "name": "net_version",
      "description": "Returns the current network id of queried node",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "name": "net_listening_params",
          "description": "no params pass empty array []",
          "required": true,
          "schema": {
            "type": "array"
          }
        }
      ],
      "result": {
        "name": "net_version",
        "description": "Returns the current network id.",
        "schema": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Returns: 'Success'"
            },
            "message": {
              "type": "string",
              "description": "Returns the current network id of quered node"
            }
          }
        }
      },
      "examples": [
        {
          "name": "Returns the current network id.",
          "description": "Example Returns the current network id.",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "name": "params",
              "type": "array",
              "value": []
            }
          ],
          "result": {
            "name": "net_version",
            "value": {
              "result": {
                "jsonrpc": "2.0",
                "id": 42,
                "result": "6"
              }
            }
          }
        },
        {
          "name": "net_version",
          "description": "node query error example",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "name": "params",
              "type": "array",
              "value": []
            }
          ],
          "result": {
            "name": "error",
            "value": {
              "status": "error",
              "message": "error message"
            }
          }
        }
      ]
    },
    {
      "name": "web3_sha3",
      "summary": "Hashes data",
      "description": "Hashes data using the Keccak-256 algorithm",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "name": "web3_sha3_params",
          "description": "Params for web3_sha3",
          "required": true,
          "schema": {
            "type": "array",
            "items": {
              "properties": {
                "data": {
                  "name": "data",
                  "description": "data to hash using the Keccak-256 algorithm",
                  "type": "string",
                  "pattern": "^0x[a-fA-F\\d]+$"
                }
              }
            }
          }
        }
      ],
      "result": {
        "name": "hashedData",
        "description": "Keccak-256 hash of the given data",
        "schema": {
          "type": "string",
          "description": "Hex representation of a Keccak 256 hash",
          "pattern": "^0x[a-fA-F\\d]{64}$"
        }
      },
      "examples": [
        {
          "name": "sha3Example",
          "params": [
            {
              "name": "sha3ParamExample",
              "value": "0x68656c6c6f20776f726c64"
            }
          ],
          "result": {
            "name": "sha3ResultExample",
            "value": "0x47173285a8d7341e5e972fc677286384f802f8ef42a5ec5f03bbfa254cb01fad"
          }
        }
      ]
    },
    {
      "name": "net_listening",
      "summary": "returns listening status",
      "description": "Determines if this client is listening for new network connections.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "name": "net_listening_params",
          "description": "no params pass empty array []",
          "required": true,
          "schema": {
            "type": "array"
          }
        }
      ],
      "result": {
        "name": "netListeningResult",
        "description": "`true` if listening is active or `false` if listening is not active",
        "schema": {
          "type": "boolean"
        }
      },
      "examples": [
        {
          "name": "netListeningTrueExample",
          "description": "example of true result for net_listening",
          "params": [
            {
              "$ref": "#/components/examples/userName"
            },
            {
              "$ref": "#/components/examples/nodeName"
            },
            {
              "$ref": "#/components/examples/nodeNetwork"
            },
            {
              "name": "params",
              "type": "array",
              "value": []
            }
          ],
          "result": {
            "name": "netListeningExampleFalseResult",
            "value": true
          }
        }
      ]
    },
    {
      "name": "net_peerCount",
      "summary": "number of peers",
      "description": "Returns the number of peers currently connected to this client.",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/userName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeName"
        },
        {
          "$ref": "#/components/contentDescriptors/nodeNetwork"
        },
        {
          "name": "net_peerCount_params",
          "description": "no params pass empty array []",
          "required": true,
          "schema": {
            "type": "array"
          }
        }
      ],
      "result": {
        "name": "quantity",
        "description": "number of connected peers.",
        "schema": {
          "description": "Hex representation of number of connected peers",
          "type": "string"
        }
      }
    }
  ],
  "components": {
    "contentDescriptors": {
      "userName": {
        "name": "userName",
        "description": "user name",
        "required": true,
        "schema": {
          "title": "userName",
          "type": "string"
        }
      },
      "password": {
        "name": "password",
        "description": "user password",
        "required": true,
        "schema": {
          "title": "password",
          "type": "string"
        }
      },
      "userRole": {
        "name": "userRole",
        "description": "user role, first user is Admin by default",
        "required": true,
        "schema": {
          "title": "userRole",
          "type": "string"
        }
      },
      "JWTtoken": {
        "name": "JWTtoken",
        "description": "JWT Token needed with this call gained on login",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "containerId": {
        "name": "containerId",
        "description": "docker container ID, returned with getUser method",
        "required": true,
        "schema": {
          "title": "containerId",
          "type": "string"
        }
      },
      "nodeName": {
        "name": "nodeName",
        "description": "Name of the node being queried",
        "required": true,
        "schema": {
          "title": "nodeName",
          "type": "string"
        }
      },
      "nodeNetwork": {
        "name": "nodeNetwork",
        "description": "blockchain network this node is on",
        "required": true,
        "schema": {
          "title": "nodeNetwork",
          "type": "string"
        }
      },
      "syncType": {
        "name": "syncType",
        "description": "Choose between LIGHT, FAST, FULL, FUll - Archive sync",
        "required": true,
        "schema": {
          "title": "syncType",
          "type": "string"
        }
      },
      "rpcApi": {
        "name": "rpcApi",
        "description": "Enables json-rpc api of node client over http: default port 8545",
        "required": true,
        "schema": {
          "title": "rpcApi",
          "type": "boolean"
        }
      },
      "wsApi": {
        "name": "wsApi",
        "description": "Enables json-rpc api of node client over websocket: default port 8546",
        "required": true,
        "schema": {
          "title": "wsApi",
          "type": "boolean"
        }
      },
      "web3params": {
        "name": "web3params",
        "description": "Parameters required for the web3 call, if none pass empty array",
        "required": true,
        "schema": {
          "title": "web3params",
          "type": "array"
        }
      }
    },
    "examples": {
      "JWTtoken": {
        "name": "JWTtoken",
        "type": "string",
        "summary": "JWT token provided after login",
        "description": "JWT token provided after login",
        "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX0lkIjoiNWQyNDRjZDRkNWZjZjQ3MjNkZjk1MjNjIiwiaWF0IjoxNTYyNjYwMDU3fQ.Pt4aZvmEip226P3rp75UtPamjqTuZTqcy4UH9vEzKTk"
      },
      "userName": {
        "name": "userName",
        "type": "string",
        "summary": "user of the name",
        "description": "Username used to login",
        "value": "bakon"
      },
      "password": {
        "name": "password",
        "type": "string",
        "summary": "password of the use",
        "description": "Users Passwordt",
        "value": "test"
      },
      "userRole": {
        "name": "userRole",
        "type": "string",
        "summary": "Role of user first account is always Admin",
        "description": "Role of user first account is always Admin",
        "value": "admin"
      },
      "containerId": {
        "name": "containerId",
        "type": "string",
        "value": "e62282029b4490e1f2198d71a724eefb7738cf4114cb55d486384fff9464d6cf"
      },
      "nodeName": {
        "name": "nodeName",
        "type": "string",
        "summary": "name of node in question",
        "description": "just the name of the node",
        "value": "kotti-full"
      },
      "nodeNetwork": {
        "name": "nodeNetwork",
        "type": "string",
        "summary": "blockchain network the node is running",
        "description": "The blockchain network of the node",
        "value": "kotti"
      },
      "syncType": {
        "name": "syncType",
        "type": "string",
        "summary": "Type of sync the node is performing",
        "description": "Is this node a Light, Full, or Full - Archive sync",
        "value": "full"
      },
      "rpcApi": {
        "name": "rpcApi",
        "type": "boolean",
        "summary": "Enable or Disable rpc api on node client over http",
        "description": "Enable or Disable rpc api on node client over http",
        "value": "true"
      },
      "wsApi": {
        "name": "wsApi",
        "type": "boolean",
        "summary": "Enable or Disable rpc api on node client over websocket",
        "description": "Enable or Disable rpc api on node client over websocket",
        "value": "true"
      },
      "web3params": {
        "name": "web3params",
        "type": "array",
        "summary": "Parameters required for the web3 call, if none pass empty array",
        "description": "Parameters required for the web3 call, if none pass empty array",
        "value": "[]"
      }
    }
  }
}